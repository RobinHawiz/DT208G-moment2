var p=Object.defineProperty;var f=(o,e,t)=>e in o?p(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var a=(o,e,t)=>f(o,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const c=class c{constructor(e=[]){this.todos=e}addTodo(e,t){if(!(e.length>0)||!(t>=1&&t<=3))return!1;const r={task:e,completed:!1,priority:t};return this.todos.push(r),!0}toggleTodoCompleted(e){const t=this.todos[e];if(!t)throw new Error("Invalid todo index: ${todoIndex}");t.completed=!t.completed}getTodos(){return this.todos}saveToLocalStorage(){const e=JSON.stringify(this.todos);localStorage.setItem(c.key,e)}loadFromLocalStorage(){const e=localStorage.getItem(c.key);this.todos=e?JSON.parse(e):[]}};a(c,"key","todos");let i=c;function u({task:o,completed:e,priority:t}){const r=document.createElement("p");r.innerText=`${t}`;const n=document.createElement("p");n.innerText=o;const s=document.createElement("button");s.innerHTML='<i class="fa-solid fa-check"></i>',s.setAttribute("id","complete");const d=document.createElement("li");return e&&d.classList.add("completed"),d.appendChild(r),d.appendChild(n),d.appendChild(s),d}function m(o,e){e.querySelector("#complete").addEventListener("click",()=>{const r=Number(e.dataset.index);o.toggleTodoCompleted(r),o.saveToLocalStorage(),e.classList.toggle("completed")})}function g(o){const e=document.querySelector("ul"),t=document.createDocumentFragment();o.getTodos().forEach(({task:r,completed:n,priority:s},d)=>{const l=u({task:r,completed:n,priority:s});l.dataset.index=String(d),m(o,l),t.appendChild(l)}),e.appendChild(t)}function h(o){document.querySelector("form").addEventListener("submit",t=>y(t,o))}function y(o,e){o.preventDefault();const t=new FormData(o.target),r={task:t.get("todo-desc"),completed:!1,priority:Number(t.get("todo-prio"))};e.addTodo(r.task,r.priority)?(e.saveToLocalStorage(),S(e,r)):alert("The submitted todo was invalid. Please try again (or don't)")}function S(o,e){const t=document.querySelector("ul"),r=u(e),n=o.getTodos().length-1;r.dataset.index=String(n),m(o,r),t.appendChild(r)}document.addEventListener("DOMContentLoaded",()=>{const o=new i;o.loadFromLocalStorage(),g(o),h(o)});
