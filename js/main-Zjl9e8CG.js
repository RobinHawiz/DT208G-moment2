var f=Object.defineProperty;var p=(o,e,t)=>e in o?f(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var a=(o,e,t)=>p(o,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const d=class d{constructor(e=[]){this.todos=e}addTodo(e,t){if(!(e.length>0)||!(t>=1&&t<=3))return!1;const r={task:e,completed:!1,priority:t};return this.todos.push(r),!0}toggleTodoCompleted(e){const t=this.todos[e];if(!t)throw new Error("Invalid todo index: ${todoIndex}");t.completed=!t.completed}getTodos(){return this.todos}saveToLocalStorage(){const e=JSON.stringify(this.todos);localStorage.setItem(d.key,e)}loadFromLocalStorage(){const e=localStorage.getItem(d.key);this.todos=e?JSON.parse(e):[]}};a(d,"key","todos");let i=d;function u({task:o,completed:e,priority:t}){const r=document.createElement("p");r.innerText=`${t}`;const n=document.createElement("p");n.innerText=o;const s=document.createElement("button");s.innerHTML='<i class="fa-solid fa-check"></i>',s.setAttribute("id","complete");const c=document.createElement("li");return e&&c.classList.add("completed"),c.appendChild(r),c.appendChild(n),c.appendChild(s),c}function m(o,e){e.querySelector("#complete").addEventListener("click",()=>{const r=Number(e.dataset.index);o.toggleTodoCompleted(r),o.saveToLocalStorage(),e.classList.toggle("completed")})}function g(o){const e=document.querySelector("ul"),t=document.createDocumentFragment();o.getTodos().forEach(({task:r,completed:n,priority:s},c)=>{const l=u({task:r,completed:n,priority:s});l.dataset.index=String(c),m(o,l),t.appendChild(l)}),e.appendChild(t)}function h(o){document.querySelector("form").addEventListener("submit",t=>y(t,o))}function y(o,e){o.preventDefault();const t=o.target,r=new FormData(t),n={task:r.get("todo-desc"),completed:!1,priority:Number(r.get("todo-prio"))};e.addTodo(n.task,n.priority)?(e.saveToLocalStorage(),S(e,n),E(t)):alert("The submitted todo was invalid. Please try again (or don't)")}function S(o,e){const t=document.querySelector("ul"),r=u(e),n=o.getTodos().length-1;r.dataset.index=String(n),m(o,r),t.appendChild(r)}function E(o){o.querySelectorAll("input").forEach(t=>{t.value=""})}document.addEventListener("DOMContentLoaded",()=>{const o=new i;o.loadFromLocalStorage(),g(o),h(o)});
