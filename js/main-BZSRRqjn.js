var m=Object.defineProperty;var p=(o,e,t)=>e in o?m(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var a=(o,e,t)=>p(o,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const d=class d{constructor(e=[]){this.todos=e}addTodo(e,t){if(!(e.length>0)||!(t>=1&&t<=3))return!1;const c={task:e,completed:!1,priority:t};return this.todos.push(c),!0}toggleTodoCompleted(e){const t=this.todos[e];if(!t)throw new Error("Invalid todo index: ${todoIndex}");t.completed=!t.completed}getTodos(){return this.todos}saveToLocalStorage(){const e=JSON.stringify(this.todos);localStorage.setItem(d.key,e)}loadFromLocalStorage(){const e=localStorage.getItem(d.key);this.todos=e?JSON.parse(e):[]}};a(d,"key","todos");let i=d;function u({task:o,completed:e,priority:t}){const c=document.createElement("p");c.innerText=`${t}`;const n=document.createElement("p");n.innerText=o;const r=document.createElement("button");r.innerHTML='<i class="fa-solid fa-check"></i>',r.setAttribute("id","complete");const s=document.createElement("li");return e&&s.classList.add("completed"),s.appendChild(c),s.appendChild(n),s.appendChild(r),s}function f(o,e){e.querySelector("#complete").addEventListener("click",()=>{const c=Number(e.dataset.index);o.toggleTodoCompleted(c),o.saveToLocalStorage(),e.classList.toggle("completed")})}function g(o){const e=document.querySelector("ul"),t=document.createDocumentFragment();o.getTodos().forEach(({task:c,completed:n,priority:r},s)=>{const l=u({task:c,completed:n,priority:r});l.dataset.index=String(s),f(o,l),t.appendChild(l)}),e.appendChild(t)}function h(o){document.querySelector("form").addEventListener("submit",t=>y(t,o))}function y(o,e){o.preventDefault();const t=new FormData(o.target),c={task:t.get("todo-desc"),completed:!1,priority:Number(t.get("todo-prio"))};e.addTodo(c.task,c.priority),e.saveToLocalStorage(),L(c)}function L(o){const e=document.querySelector("ul"),t=u(o);e.appendChild(t)}document.addEventListener("DOMContentLoaded",()=>{const o=new i;o.loadFromLocalStorage(),g(o),h(o)});
